(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t(14),r=t.n(o),u=t(3),a=t(4),i=t.n(a),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},l=function(e){return i.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=t(0),j=function(e){return e.preventDefault()},m=function(e,n){return Object(h.jsxs)("form",{onSubmit:j,children:["Filter shown with:",Object(h.jsx)("input",{value:e,onChange:n})]})},p=function(e,n,t,c,o){return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{onSubmit:e,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:n,onChange:t})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:c,onChange:o})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})})},O=function(e,n,t){var c=n.toUpperCase();return e.filter((function(e){return e.name.toUpperCase().includes(c)})).map((function(e){return Object(h.jsxs)("div",{children:[e.name," ",e.number,Object(h.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))},v={success:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},fail:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},g=function(e,n){return null===e?null:n?Object(h.jsx)("div",{className:"success",style:v.success,children:e}):Object(h.jsx)("div",{className:"success",style:v.fail,children:e})},x=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],r=Object(c.useState)(""),a=Object(u.a)(r,2),i=a[0],s=a[1],j=Object(c.useState)(""),v=Object(u.a)(j,2),x=v[0],y=v[1],k=Object(c.useState)(""),S=Object(u.a)(k,2),w=S[0],U=S[1],C=Object(c.useState)(null),D=Object(u.a)(C,2),N=D[0],A=D[1],B=Object(c.useState)(null),P=Object(u.a)(B,2),R=P[0],z=P[1];Object(c.useEffect)((function(){E()}),[]);var E=function(){d().then((function(e){o(e)})).catch((function(e){return F("Data search unsuccesful",!1)}))},F=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];A(e),z(n),setTimeout((function(){A(null),z(null)}),8e3)};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)("div",{children:g(N,R)}),m(w,(function(e){U(e.target.value)})),Object(h.jsx)("h2",{children:"Add a new"}),p((function(e){e.preventDefault();var n={name:i,number:x};if(t.some((function(e){return e.name===i}))){var c=t.find((function(e){return e.name===i})),r=Object.assign(c,n);window.confirm("Do you want to update ".concat(i," with number ").concat(x,"?"))&&b(c.id,n).then((function(){o(t.map((function(e){return e.name===i?r:e}))),s(""),y(""),F("User ".concat(i," phone number has been updated"))})).catch((function(e){F("Update unsuccesful. User ".concat(i," has already been removed from the phonebook."),!1),o(t.filter((function(e){return e.name!==i})))}))}else t.some((function(e){return e.number===x}))?F("Number ".concat(x," has already been added to the phonebook ."),!1):""===i||""===x?F("Name and number cannot be empty",!1):(l(n).then((function(e){o(t.concat(e)),s(""),y(""),F("User ".concat(i," has already been added to the phonbook"))})).catch((function(e){return F("Adding number unsuccesful. More info about error: ".concat(e.response.data.error),!1)})),E())}),i,(function(e){s(e.target.value)}),x,(function(e){y(e.target.value)})),Object(h.jsx)("h2",{children:"Numbers"}),O(t,w,(function(e){window.confirm("Remove ".concat(e.name,"?"))&&f(e.id).then((function(){o(t.filter((function(n){return n.id!==e.id}))),F("User ".concat(e.name," has already been deleted from the Phonebook"))})).catch((function(n){F("Deleting unsuccesful. User ".concat(e.name," has already been deleted from the Phonebook."),!1),console.log("id already removed (or other problem)"),E()}))}))]})};t(38);r.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.598d26fb.chunk.js.map